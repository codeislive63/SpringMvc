<!DOCTYPE html>
<html lang="ru"
      xmlns:th="http://www.thymeleaf.org"
>
<head>
    <meta charset="UTF-8">
    <title>Поиск поездок • Railway Booker</title>
    <link rel="stylesheet" th:href="@{/css/app.css}">
</head>
<body class="app-bg">

<header th:replace="~{fragments/topbar :: topbar}"></header>

<main class="page">
    <section class="welcome">
        <div class="section-title">
            <div class="eyebrow">Поиск поездов</div>
            <h1 style="margin: 0;">Поиск поездок</h1>
        </div>
        <p>Выберите маршрут, дату и нужные фильтры: тип поезда, класс вагона, время отправления, цена и услуги.</p>

        <div th:if="${error}" class="alert error" th:text="${error}"></div>
    </section>

    <section class="cards-grid">
        <article class="card search-card">
            <form class="form" th:action="@{/search}" method="get">
                <div class="form-group">
                    <label for="routeId">Маршрут</label>
                    <div class="select-wrapper">
                        <select name="routeId" id="routeId" class="custom-select" required>
                            <option value="" disabled selected>Выберите маршрут</option>
                            <option th:each="route : ${routes}"
                                    th:value="${route.id}"
                                    th:text="${route.origin.name + ' — ' + route.destination.name + ' (' + route.name + ')'}">
                            </option>
                        </select>
                    </div>

                </div>

                <div class="form-group">
                    <label for="date">Дата поездки</label>
                    <input id="date" type="date" name="date" required>
                </div>

                <div class="filter-grid">
                    <div class="form-group">
                        <label for="trainType">Тип поезда</label>
                        <div class="select-wrapper">
                            <select id="trainType" name="trainType" class="custom-select">
                                <option value="">Любой</option>
                                <option value="express">Скоростной / экспресс</option>
                                <option value="regional">Региональный</option>
                                <option value="night">Ночной</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="carClass">Класс вагона</label>
                        <div class="select-wrapper">
                            <select id="carClass" name="carClass" class="custom-select">
                                <option value="">Любой</option>
                                <option value="business">Бизнес</option>
                                <option value="coupe">Купе</option>
                                <option value="platzcart">Плацкарт</option>
                                <option value="sitting">Сидячий</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="departureTime">Время отправления</label>
                        <div class="input-inline">
                            <input id="departureTime" type="time" name="departureTimeFrom" placeholder="с">
                            <input type="time" name="departureTimeTo" placeholder="до">
                        </div>
                        <div class="hint">Ограничьте поиск по окну отправления</div>
                    </div>

                    <div class="form-group">
                        <label for="price">Макс. цена</label>
                        <input id="price" type="range" name="maxPrice" min="10" max="250" step="5" value="120"
                               oninput="document.getElementById('priceValue').textContent=this.value + ' BYN'">
                        <div class="hint">
                            <span id="priceValue">120 BYN</span>
                        </div>
                    </div>
                </div>

                <div class="divider-line"></div>

                <div class="pill-group">
                    <label class="pill-toggle">
                        <input type="checkbox" name="wifi" value="true">
                        <span>Wi‑Fi</span>
                        <span class="dot"></span>
                    </label>
                    <label class="pill-toggle">
                        <input type="checkbox" name="food" value="true">
                        <span>Питание</span>
                        <span class="dot"></span>
                    </label>
                    <label class="pill-toggle">
                        <input type="checkbox" name="pets" value="true">
                        <span>Можно с животными</span>
                        <span class="dot"></span>
                    </label>
                    <label class="pill-toggle">
                        <input type="checkbox" name="luggage" value="true">
                        <span>Доп. багаж</span>
                        <span class="dot"></span>
                    </label>
                </div>

                <button class="btn primary w-100" type="submit">
                    Найти рейсы
                </button>
            </form>
        </article>

        <article class="card filter-panel">
            <h2 style="margin-top: 0;">Что учесть при поиске</h2>
            <div class="info-grid">
                <div class="info-tile">
                    <div class="label">Посадка по времени</div>
                    <span class="value">Утро, день, вечер</span>
                </div>
                <div class="info-tile">
                    <div class="label">Услуги в поезде</div>
                    <span class="value">Wi‑Fi, питание, розетки</span>
                </div>
                <div class="info-tile">
                    <div class="label">Класс поездки</div>
                    <span class="value">Сидячий, плацкарт, купе</span>
                </div>
                <div class="info-tile">
                    <div class="label">Доп. сервисы</div>
                    <span class="value">Страховка, питание, трансфер</span>
                </div>
            </div>
        </article>
    </section>
</main>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const dateInput = document.getElementById("date");
        if (dateInput && !dateInput.value) {
            dateInput.value = new Date().toISOString().slice(0, 10);
        }
    });
</script>


</body>
</html>
